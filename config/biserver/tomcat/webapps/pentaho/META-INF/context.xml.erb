<?xml version="1.0" encoding="UTF-8"?>
<Context path="/<%= ENV['WEBAPP_PENTAHO_DIRNAME'] %>" docBase="webapps/<%= ENV['WEBAPP_PENTAHO_DIRNAME'] %>">

	<%- if ENV['STORAGE_TYPE'] == 'local' -%>
	<Resource
		name="jdbc/Hibernate"
		auth="Container"
		type="javax.sql.DataSource"
		factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
		driverClassName="org.hsqldb.jdbcDriver"
		username="hibuser"
		password="password"
		url="jdbc:hsqldb:hsql://localhost:<%= ENV['HSQLDB_PORT'] %>/hibernate"
		initialSize="0"
		maxTotal="20"
		maxIdle="5"
		maxWaitMillis="10000"
		validationQuery="SELECT count(*) FROM INFORMATION_SCHEMA.SYSTEM_SEQUENCES"
	/>
	<%- elsif ENV['STORAGE_TYPE'] == 'postgres' -%>
	<Resource
		name="jdbc/Hibernate"
		auth="Container"
		type="javax.sql.DataSource"
		factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
		driverClassName="org.postgresql.Driver"
		username="<%= ENV['POSTGRES_HIBERNATE_USER'] %>"
		password="<%= ENV['POSTGRES_HIBERNATE_PASSWORD'] %>"
		url="jdbc:postgresql://<%= ENV['POSTGRES_HOST'] %>:<%= ENV['POSTGRES_PORT'] %>/<%= ENV['POSTGRES_HIBERNATE_DATABASE'] %>"
		initialSize="0"
		maxTotal="20"
		maxIdle="5"
		maxWaitMillis="10000"
		validationQuery="SELECT 1"
	/>
	<%- elsif ENV['STORAGE_TYPE'] == 'mysql' -%>
	<Resource
		name="jdbc/Hibernate"
		auth="Container"
		type="javax.sql.DataSource"
		factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
		driverClassName="com.mysql.jdbc.Driver"
		username="<%= ENV['MYSQL_HIBERNATE_USER'] %>"
		password="<%= ENV['MYSQL_HIBERNATE_PASSWORD'] %>"
		url="jdbc:mysql://<%= ENV['MYSQL_HOST'] %>:<%= ENV['MYSQL_PORT'] %>/<%= ENV['MYSQL_HIBERNATE_DATABASE'] %>"
		initialSize="0"
		maxTotal="20"
		maxIdle="5"
		maxWaitMillis="10000"
		validationQuery="SELECT 1"
	/>
	<%- elsif ENV['STORAGE_TYPE'] == 'oracle' -%>
	<Resource
		name="jdbc/Hibernate"
		auth="Container"
		type="javax.sql.DataSource"
		factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
		driverClassName="oracle.jdbc.OracleDriver"
		username="<%= ENV['ORACLE_HIBERNATE_USER'] %>"
		password="<%= ENV['ORACLE_HIBERNATE_PASSWORD'] %>"
		url="jdbc:oracle:thin:@<%= ENV['ORACLE_HOST'] %>:<%= ENV['ORACLE_PORT'] %>:<%= ENV['ORACLE_HIBERNATE_DATABASE'] %>"
		initialSize="0"
		maxTotal="20"
		maxIdle="5"
		maxWaitMillis="10000"
		validationQuery="SELECT 1"
	/>
	<%- end -%>

	<%- if ENV['STORAGE_TYPE'] == 'local' -%>
	<Resource
		name="jdbc/Quartz"
		auth="Container"
		type="javax.sql.DataSource"
		factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
		driverClassName="org.hsqldb.jdbcDriver"
		username="pentaho_user"
		password="password"
		url="jdbc:hsqldb:hsql://localhost:<%= ENV['HSQLDB_PORT'] %>/quartz"
		initialSize="0"
		maxTotal="20"
		maxIdle="5"
		maxWaitMillis="10000"
		validationQuery="SELECT count(*) FROM INFORMATION_SCHEMA.SYSTEM_SEQUENCES"
	/>
	<%- elsif ENV['STORAGE_TYPE'] == 'postgres' -%>
	<Resource
		name="jdbc/Quartz"
		auth="Container"
		type="javax.sql.DataSource"
		factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
		driverClassName="org.postgresql.Driver"
		username="<%= ENV['POSTGRES_QUARTZ_USER'] %>"
		password="<%= ENV['POSTGRES_QUARTZ_PASSWORD'] %>"
		url="jdbc:postgresql://<%= ENV['POSTGRES_HOST'] %>:<%= ENV['POSTGRES_PORT'] %>/<%= ENV['POSTGRES_QUARTZ_DATABASE'] %>"
		initialSize="0"
		maxTotal="20"
		maxIdle="5"
		maxWaitMillis="10000"
		validationQuery="SELECT 1"
	/>
	<%- elsif ENV['STORAGE_TYPE'] == 'mysql' -%>
	<Resource
		name="jdbc/Quartz"
		auth="Container"
		type="javax.sql.DataSource"
		factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
		driverClassName="com.mysql.jdbc.Driver"
		username="<%= ENV['MYSQL_QUARTZ_USER'] %>"
		password="<%= ENV['MYSQL_QUARTZ_PASSWORD'] %>"
		url="jdbc:mysql://<%= ENV['MYSQL_HOST'] %>:<%= ENV['MYSQL_PORT'] %>/<%= ENV['MYSQL_QUARTZ_DATABASE'] %>"
		initialSize="0"
		maxTotal="20"
		maxIdle="5"
		maxWaitMillis="10000"
		validationQuery="SELECT 1"
	/>
	<%- elsif ENV['STORAGE_TYPE'] == 'oracle' -%>
	<Resource
		name="jdbc/Quartz"
		auth="Container"
		type="javax.sql.DataSource"
		factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
		driverClassName="oracle.jdbc.OracleDriver"
		username="<%= ENV['ORACLE_QUARTZ_USER'] %>"
		password="<%= ENV['ORACLE_QUARTZ_PASSWORD'] %>"
		url="jdbc:oracle:thin:@<%= ENV['ORACLE_HOST'] %>:<%= ENV['ORACLE_PORT'] %>:<%= ENV['ORACLE_QUARTZ_DATABASE'] %>"
		initialSize="0"
		maxTotal="20"
		maxIdle="5"
		maxWaitMillis="10000"
		validationQuery="SELECT 1"
	/>
	<%- end -%>

</Context>
